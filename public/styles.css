/* =====================================================================================
   SpeakUp — Modern Apple-inspired UI
   - Glass panels, soft depth, subtle gradients, crisp typography
   - Fully responsive (mobile-first → ultrawide)
   - Beautiful defaults for every element in your HTML
   ===================================================================================== */

/* ------------------ Design Tokens ------------------ */
:root {
  /* Surfaces */
  --bg: #0b0c10;
  --bg-alt: #0e1117;
  --panel: rgba(20, 22, 28, 0.72);
  --panel-2: rgba(24, 27, 35, 0.68);
  --card: rgba(22, 24, 31, 0.8);
  --border: 1px solid rgba(255, 255, 255, 0.08);
  --divider: rgba(255, 255, 255, 0.09);

  /* Text */
  --text: #ecf1ff;
  --text-strong: #ffffff;
  --muted: #9aa8c1;
  --muted-2: #7f8aa3;

  /* Accents (cool azure + cyan) */
  --acc1: #3a86ff;
  --acc2: #00e0ff;
  --accent-grad: linear-gradient(140deg, #3a86ff 0%, #00e0ff 100%);

  /* State */
  --success: #28d17c;
  --warn: #ffcc66;
  --danger: #ff6b6b;

  /* Radii & Effects */
  --radius: 16px;
  --radius-lg: 20px;
  --shadow-sm: 0 6px 18px rgba(0, 0, 0, 0.25);
  --shadow: 0 14px 40px rgba(0, 0, 0, 0.35);
  --ring: 0 0 0 3px rgba(58, 134, 255, 0.25);

  /* Sizing */
  --maxw: 1200px;
  --gap: 14px;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
  }
}

/* ------------------ Base Reset ------------------ */
* {
  box-sizing: border-box;
}
html,
body {
  height: 100%;
}
html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
body {
  margin: 0;
  font-family: ui-sans-serif, -apple-system, "SF Pro Text", Inter, Segoe UI,
    Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
  background: radial-gradient(
      1200px 800px at 20% -10%,
      rgba(58, 134, 255, 0.12),
      transparent 60%
    ),
    radial-gradient(
      900px 600px at 110% 20%,
      rgba(0, 224, 255, 0.12),
      transparent 60%
    ),
    var(--bg);
  letter-spacing: 0.2px;
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Utility */
.text-muted {
  color: var(--muted);
}
.hr {
  height: 1px;
  width: 100%;
  background: linear-gradient(90deg, transparent, var(--divider), transparent);
  margin: 10px 0;
}
.chip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.06),
    rgba(255, 255, 255, 0.02)
  );
  border: var(--border);
  color: var(--text);
  backdrop-filter: blur(8px);
}

/* ------------------ App Container ------------------ */
.app-container {
  max-width: var(--maxw);
  margin: 24px auto;
  padding: 18px;
}

/* ------------------ Header ------------------ */
header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 16px;
  padding: 18px 18px;
  background: var(--panel);
  border: var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  backdrop-filter: blur(12px);
}
header h1 {
  font-weight: 700;
  font-size: clamp(20px, 2vw + 10px, 28px);
  letter-spacing: 0.3px;
  margin: 0;
}
.header-tools {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

/* Voice select / preview */
.voice-preview {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 12px;
  border: var(--border);
  background: var(--panel-2);
  backdrop-filter: blur(12px);
}
.voice-select {
  appearance: none;
  border: none;
  outline: none;
  background: transparent;
  color: var(--text);
  font: inherit;
  padding: 6px 2px;
  min-width: 200px;
}
.voice-select:focus-visible {
  box-shadow: var(--ring);
  border-radius: 10px;
}

/* ------------------ Navigation (Tabs) ------------------ */
nav {
  position: sticky;
  bottom: 14px;
  display: flex;
  gap: 10px;
  justify-content: center;
  align-items: center;
  margin-top: 16px;
  padding: 10px;
  border-radius: 999px;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.07),
    rgba(255, 255, 255, 0.03)
  );
  border: var(--border);
  backdrop-filter: blur(10px);
  box-shadow: var(--shadow-sm);
}
.nav-btn {
  appearance: none;
  border: none;
  cursor: pointer;
  padding: 10px 14px;
  border-radius: 999px;
  color: var(--text);
  background: transparent;
  font-weight: 600;
  letter-spacing: 0.2px;
  transition: transform 0.18s ease, background 0.18s ease;
}
.nav-btn:hover {
  transform: translateY(-1px);
  background: rgba(255, 255, 255, 0.06);
}
.nav-btn.active {
  background: var(--accent-grad);
  color: #06111a;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.25);
}

/* ------------------ Panels & Layout ------------------ */
main {
  margin-top: 16px;
}
.panel {
  display: none;
}
.panel.active {
  display: block;
}

.layout {
  display: grid;
  gap: var(--gap);
  grid-template-columns: 1fr;
}
@media (min-width: 980px) {
  .layout {
    grid-template-columns: 1.2fr 0.9fr;
  }
}

.card {
  background: var(--card);
  border: var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px);
  padding: 12px;
}

/* ------------------ Chat Area ------------------ */
.chat-box {
  min-height: 46vh;
  max-height: min(64vh, 700px);
  overflow: auto;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  scroll-behavior: smooth;
  border-radius: var(--radius);
}

/* Scrollbars */
.chat-box::-webkit-scrollbar,
.feedback-scroll::-webkit-scrollbar {
  height: 10px;
  width: 10px;
}
.chat-box::-webkit-scrollbar-thumb,
.feedback-scroll::-webkit-scrollbar-thumb {
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.14),
    rgba(255, 255, 255, 0.07)
  );
  border-radius: 999px;
}

/* Messages */
.msg {
  display: flex;
  gap: 10px;
  align-items: flex-start;
  max-width: 92%;
}
.msg .bubble {
  padding: 10px 12px;
  border-radius: 14px;
  border: var(--border);
  line-height: 1.35;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
  transform-origin: 0 100%;
  animation: pop 0.15s ease-out;
}
@keyframes pop {
  from {
    transform: scale(0.98);
    opacity: 0.7;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}
.msg.me {
  justify-content: flex-end;
  margin-left: auto;
}
.msg.me .bubble {
  background: linear-gradient(
    180deg,
    rgba(58, 134, 255, 0.22),
    rgba(0, 224, 255, 0.18)
  );
  color: var(--text-strong);
  border-color: rgba(255, 255, 255, 0.18);
}
.msg.ai .bubble {
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.06),
    rgba(255, 255, 255, 0.02)
  );
  color: var(--text);
}

/* Tiny avatar dots (optional if you add images later) */
.msg::before {
  content: "";
  width: 8px;
  height: 8px;
  margin-top: 10px;
  border-radius: 50%;
  background: linear-gradient(180deg, #cfd7ff, #8fbfff);
  opacity: 0.5;
}
.msg.me::before {
  background: linear-gradient(180deg, #66d1ff, #3a86ff);
}

/* Typing indicator */
.typing {
  display: inline-flex;
  gap: 4px;
  align-items: center;
}
.dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.6);
  animation: pulse 1.2s infinite ease-in-out;
}
.dot:nth-child(2) {
  animation-delay: 0.15s;
}
.dot:nth-child(3) {
  animation-delay: 0.3s;
}
@keyframes pulse {
  0%,
  80%,
  100% {
    transform: scale(0.6);
    opacity: 0.4;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

/* ------------------ Controls ------------------ */
.controls {
  display: flex;
  gap: 8px;
  align-items: center;
  margin-top: 10px;
  background: var(--panel-2);
  border: var(--border);
  border-radius: 14px;
  padding: 8px;
  box-shadow: var(--shadow-sm);
}
.controls input[type="text"] {
  flex: 1;
  min-width: 120px;
  background: transparent;
  border: none;
  outline: none;
  color: var(--text);
  font-size: 15px;
  padding: 10px 12px;
  border-radius: 10px;
}
.controls input::placeholder {
  color: color-mix(in oklab, var(--muted) 80%, white 10%);
}

/* Buttons */
button {
  appearance: none;
  border: none;
  cursor: pointer;
  background: var(--accent-grad);
  color: #06111a;
  font-weight: 700;
  letter-spacing: 0.2px;
  border-radius: 12px;
  padding: 10px 14px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25),
    inset 0 0 0 1px rgba(255, 255, 255, 0.25);
  transition: transform 0.18s ease, filter 0.18s ease, box-shadow 0.18s ease;
}
button:hover {
  transform: translateY(-1px);
  filter: saturate(1.08);
}
button:active {
  transform: translateY(0);
}
button:focus-visible {
  outline: none;
  box-shadow: var(--ring);
}

/* Ghost / subtle buttons */
.btn-ghost {
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.07),
    rgba(255, 255, 255, 0.04)
  );
  color: var(--text);
  box-shadow: none;
  border: var(--border);
}
.btn-ghost:hover {
  background: rgba(255, 255, 255, 0.1);
}

/* Mic circular button (if you keep emoji mic) */
.mic-btn {
  border-radius: 12px;
  font-size: 16px;
  min-width: 44px;
}

/* ------------------ Right: Feedback ------------------ */
.feedback-card {
  padding: 12px;
}
.feedback-scroll {
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-height: min(64vh, 700px);
  overflow: auto;
  padding-right: 6px;
}

.feedback-item {
  border: var(--border);
  border-radius: 14px;
  padding: 10px;
  background: linear-gradient(
    180deg,
    rgba(58, 134, 255, 0.06),
    rgba(0, 224, 255, 0.03)
  );
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25);
}
.feedback-item .head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 6px;
}
.badge {
  padding: 4px 8px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
  color: #06111a;
  background: var(--accent-grad);
}
.metric-grid {
  display: grid;
  gap: 8px;
  grid-template-columns: repeat(2, minmax(0, 1fr));
}
@media (min-width: 520px) {
  .metric-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}
.metric {
  background: rgba(255, 255, 255, 0.05);
  border: var(--border);
  border-radius: 12px;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.metric .label {
  font-size: 12px;
  color: var(--muted);
  letter-spacing: 0.3px;
}
.metric .score {
  font-size: 18px;
  font-weight: 800;
}

.corrections {
  margin-top: 6px;
  padding: 8px;
  background: rgba(0, 0, 0, 0.25);
  border-radius: 12px;
  border: var(--border);
}
.corrections .row {
  display: flex;
  gap: 8px;
  align-items: flex-start;
}
.corrections .tag {
  font-size: 12px;
  color: #06111a;
  background: var(--warn);
  border-radius: 999px;
  padding: 2px 8px;
  font-weight: 700;
}
.corrections .wrong {
  color: #ff9a9a;
  text-decoration: line-through;
}
.corrections .right {
  color: var(--success);
  font-weight: 700;
}

/* ------------------ Survey ------------------ */
#survey .grid {
  gap: 12px;
}
label {
  font-size: 13px;
  color: var(--muted);
}
input[type="text"],
select {
  width: 100%;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.06),
    rgba(255, 255, 255, 0.03)
  );
  color: var(--text);
  border: var(--border);
  outline: none;
  padding: 10px 12px;
  border-radius: 12px;
  transition: box-shadow 0.18s ease, border-color 0.18s ease,
    transform 0.18s ease;
}
select {
  cursor: pointer;
}
input[type="text"]:focus,
select:focus {
  box-shadow: var(--ring);
}

.topic-group {
  margin-top: 8px;
  padding: 10px;
  border-radius: 14px;
  border: var(--border);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.05),
    rgba(255, 255, 255, 0.02)
  );
}
.group-title {
  font-weight: 800;
  letter-spacing: 0.3px;
  color: var(--muted);
  font-size: 12px;
  text-transform: uppercase;
  margin-bottom: 8px;
}
.topic-grid {
  display: grid;
  gap: 8px;
  grid-template-columns: repeat(1, minmax(0, 1fr));
}
@media (min-width: 620px) {
  .topic-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
@media (min-width: 980px) {
  .topic-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}
.topic-grid label {
  display: flex;
  gap: 8px;
  align-items: flex-start;
  padding: 8px;
  border-radius: 12px;
  cursor: pointer;
  background: rgba(255, 255, 255, 0.03);
  border: var(--border);
}
.topic-grid input[type="checkbox"] {
  transform: translateY(1px);
  accent-color: #48b6ff;
}
.topic-grid label:hover {
  background: rgba(255, 255, 255, 0.06);
}

.topic-custom input {
  flex: 1;
}

/* Chips container for chosen topics */
.chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.chips .chip {
  background: rgba(58, 134, 255, 0.1);
  border: 1px solid rgba(58, 134, 255, 0.25);
}

/* ------------------ Certificate ------------------ */
#certificate .grid {
  grid-template-columns: 1fr;
  gap: 10px;
}
@media (min-width: 680px) {
  #certificate .grid {
    grid-template-columns: 1fr 1fr;
  }
}
#certOutput {
  min-height: 140px;
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.06),
      rgba(255, 255, 255, 0.03)
    ),
    radial-gradient(
      500px 260px at 0% 0%,
      rgba(58, 134, 255, 0.12),
      transparent 60%
    ),
    radial-gradient(
      600px 300px at 100% 100%,
      rgba(0, 224, 255, 0.12),
      transparent 60%
    );
  border: var(--border);
  border-radius: 14px;
}

/* ------------------ Accessibility states ------------------ */
:focus-visible {
  outline: none;
  box-shadow: var(--ring);
  border-radius: 10px;
}

/* ------------------ Micro-interactions ------------------ */
button,
.topic-grid label,
.nav-btn {
  will-change: transform, filter;
}

/* ------------------ Layout specifics for left/right ------------------ */
.left .card {
  padding: 12px;
}
.right .card {
  padding: 12px;
}

/* ------------------ Extra: helper classes your JS can use ------------------ */
.hidden {
  display: none !important;
}
.fade-in {
  animation: fade 0.22s ease forwards;
  opacity: 0;
}
@keyframes fade {
  to {
    opacity: 1;
  }
}

/* ------------------ Mobile polish ------------------ */
@media (max-width: 480px) {
  header {
    padding: 14px;
  }
  .voice-preview {
    min-width: 100%;
  }
  .controls {
    padding: 6px;
  }
  button {
    padding: 10px 12px;
  }
  .nav-btn {
    padding: 8px 12px;
  }
}

/* ------------------ Ultra-wide framing ------------------ */
@media (min-width: 1440px) {
  .app-container {
    max-width: 1320px;
  }
}
/* ===============================
   RESPONSIVE PATCH (append only)
   =============================== */

/* Fluid type & spacing */
:root {
  --gap: clamp(10px, 1.8vw, 14px);
  --radius: clamp(12px, 2.2vw, 16px);
  --radius-lg: clamp(14px, 2.6vw, 20px);
}

/* Header: compress elegantly */
header {
  flex-wrap: wrap;
  gap: clamp(10px, 2vw, 16px);
  padding: clamp(12px, 2.6vw, 18px);
}
header h1 {
  font-size: clamp(18px, 4.5vw, 28px);
  line-height: 1.15;
}

/* Voice select stretches on small screens */
.header-tools {
  width: 100%;
}
.voice-preview {
  flex: 1 1 260px;
  min-width: 0;
}
.voice-select {
  width: 100%;
  min-width: 0;
}

/* Layout: single column first, then split */
.layout {
  grid-template-columns: 1fr;
}
@media (min-width: 900px) {
  .layout {
    grid-template-columns: 1.1fr 0.9fr;
  }
}
@media (min-width: 1200px) {
  .layout {
    grid-template-columns: 1.2fr 0.95fr;
  }
}

/* On phones: stack Right under Left */
.left {
  order: 1;
}
.right {
  order: 2;
}

/* Chat height logic: comfy on phones, taller on tablets/desktop */
.chat-box {
  /* Use dynamic viewport height to avoid iOS URL bar jumps */
  min-height: 38dvh;
  max-height: 52dvh;
}
@media (min-width: 600px) {
  .chat-box {
    min-height: 46dvh;
    max-height: 64dvh;
  }
}

/* Controls: sticky at bottom of the chat area on small screens */
.controls {
  position: sticky;
  bottom: 0;
  z-index: 2;
  padding: clamp(6px, 1.6vw, 10px);
  gap: clamp(6px, 1.6vw, 10px);
}

/* Buttons & inputs grow thumb-friendly on phones */
.controls input[type="text"] {
  font-size: clamp(14px, 3.8vw, 16px);
  padding: clamp(9px, 2.6vw, 12px);
}
button,
.btn-ghost,
.mic-btn {
  padding: clamp(9px, 2.6vw, 12px) clamp(12px, 3.2vw, 14px);
  border-radius: clamp(10px, 2.4vw, 12px);
}

/* Feedback column: matched height & smoother scroll on mobile */
.feedback-scroll {
  max-height: 40dvh;
}
@media (min-width: 600px) {
  .feedback-scroll {
    max-height: min(64vh, 700px);
  }
}

/* Topic grids: collapse progressively */
.topic-grid {
  grid-template-columns: 1fr;
}
@media (min-width: 520px) {
  .topic-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
@media (min-width: 960px) {
  .topic-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

/* Certificate inputs: single column on phones */
#certificate .grid {
  grid-template-columns: 1fr;
}
@media (min-width: 680px) {
  #certificate .grid {
    grid-template-columns: 1fr 1fr;
  }
}

/* Bottom nav: dock on mobile, respect safe-area */
nav {
  position: sticky;
  bottom: 0;
  margin-top: clamp(10px, 2.4vw, 16px);
  padding: clamp(8px, 2.6vw, 10px);
  inset-inline: auto;
}
@supports (padding: max(0px)) {
  nav {
    padding-bottom: max(10px, env(safe-area-inset-bottom));
  }
}
.nav-btn {
  font-size: clamp(13px, 3.4vw, 15px);
  padding: clamp(8px, 2.6vw, 12px) clamp(10px, 3.2vw, 14px);
}

/* Cards & panels breathe on tiny screens */
.card {
  padding: clamp(10px, 2.6vw, 12px);
  border-radius: var(--radius);
}

/* Scrollbar slimmer on narrow screens */
@media (max-width: 480px) {
  .chat-box::-webkit-scrollbar,
  .feedback-scroll::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
}

/* Prevent layout shift from long words / links */
.chat-box,
.feedback-scroll,
.topic-grid,
.chips {
  overflow-wrap: anywhere;
}

/* Tweak HR spacing on tight space */
.hr {
  margin: clamp(6px, 1.8vw, 10px) 0;
}
/* =========================================
   FEEDBACK METRICS — RESPONSIVE PATCH
   ========================================= */

/* 1) Make each feedback item a container so inner layout can adapt */
.feedback-item {
  container-type: inline-size;
}

/* 2) Fluid grid that never squishes numbers */
.metric-grid {
  grid-template-columns: repeat(2, minmax(0, 1fr)); /* default */
  gap: clamp(6px, 1.8vw, 10px);
}

/* Phones in portrait: allow single column if very narrow */
@media (max-width: 380px) {
  .metric-grid {
    grid-template-columns: 1fr;
  }
}

/* Small tablets and up: 3 columns */
@media (min-width: 560px) {
  .metric-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

/* Wide screens: 4 columns feels airy */
@media (min-width: 1080px) {
  .metric-grid {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
}

/* 3) Metric card sizing + typography that scales */
.metric {
  padding: clamp(8px, 1.8vw, 12px);
  min-width: 0; /* prevent overflow in grid cells */
}

.metric .label {
  font-size: clamp(11px, 1.9vw, 12px);
  line-height: 1.15;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Big score that gracefully shrinks on small screens */
.metric .score {
  font-size: clamp(16px, 5.2vw, 22px);
  line-height: 1;
  font-weight: 800;
  font-variant-numeric: tabular-nums; /* prevents layout jump */
  white-space: nowrap;
}

/* 4) When the container (feedback-item) is tight, reflow label + score inline */
@container (max-width: 380px) {
  .metric {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    row-gap: 4px;
  }
  .metric .label {
    order: 1;
  }
  .metric .score {
    order: 2;
    justify-self: end;
  }
}

/* 5) Tighten correction blocks on phones so nothing overflows */
@media (max-width: 420px) {
  .corrections {
    padding: 6px;
    font-size: 13px;
  }
  .corrections .row {
    flex-wrap: wrap;
  }
}

/* 6) Prevent any number or long word from breaking the layout */
.feedback-scroll,
.feedback-item,
.metric,
.corrections {
  overflow-wrap: anywhere;
}

/* 7) Optional: compact badge size on narrow screens */
@media (max-width: 420px) {
  .badge {
    padding: 3px 7px;
    font-size: 11px;
  }
}
/* =========================================
   VOICE SELECT — Modern Gradient Redesign
   ========================================= */

/* Wrapper (glass panel) */
.voice-preview {
  position: relative;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.08),
    rgba(255, 255, 255, 0.03)
  );
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 14px;
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.25);
  transition: all 0.25s ease;
}
.voice-preview:hover {
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.12),
    rgba(255, 255, 255, 0.05)
  );
  border-color: rgba(255, 255, 255, 0.18);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35);
}

/* Select element */
.voice-select {
  appearance: none;
  width: 100%;
  padding: 10px 36px 10px 12px;
  border: none;
  border-radius: 12px;
  font-size: 15px;
  color: var(--text);
  font-weight: 600;
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.07),
      rgba(255, 255, 255, 0.02)
    ),
    var(--panel);
  backdrop-filter: blur(12px);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.12);
  cursor: pointer;
  transition: background 0.25s ease, color 0.25s ease;
}

/* Gradient border glow when focused */
.voice-select:focus-visible {
  outline: none;
  background: linear-gradient(
      180deg,
      rgba(58, 134, 255, 0.18),
      rgba(0, 224, 255, 0.08)
    ),
    var(--panel);
  box-shadow: 0 0 0 3px rgba(0, 224, 255, 0.25);
}

/* Dropdown arrow (custom) */
.voice-preview::after {
  content: "▾";
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  font-size: 14px;
  color: var(--muted);
  transition: color 0.2s ease;
}
.voice-preview:hover::after {
  color: var(--acc2);
}

/* Dropdown options styling */
.voice-select option {
  background: #0e1117;
  color: var(--text);
}
.voice-select option:hover,
.voice-select option:focus {
  background: linear-gradient(90deg, var(--acc1) 0%, var(--acc2) 100%);
  color: #06111a;
}

/* High contrast dark fallback for some browsers */
@supports not (backdrop-filter: blur(10px)) {
  .voice-preview {
    background: rgba(255, 255, 255, 0.08);
  }
}
/* =========================================
   FONT THEME — Times New Roman Elegance
   ========================================= */
body,
input,
button,
select,
textarea {
  font-family: "Times New Roman", Times, serif !important;
  font-weight: 400;
  letter-spacing: 0.2px;
  line-height: 1.5;
  color: var(--text);
}

/* Optional: headings a bit bolder & tighter for sophistication */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: "Times New Roman", Times, serif !important;
  font-weight: 700;
  letter-spacing: 0.4px;
  line-height: 1.2;
}

/* Optional: soften UI text tone */
.text-muted {
  font-style: italic;
  color: var(--muted);
}
/* =========================================
   ACTFL LEVEL SELECT — Modern Gradient Redesign
   ========================================= */

#actflSelect {
  appearance: none;
  width: 100%;
  padding: 10px 36px 10px 12px;
  border: none;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 600;
  color: var(--text);
  background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.07),
      rgba(255, 255, 255, 0.02)
    ),
    var(--panel);
  backdrop-filter: blur(12px);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.12);
  cursor: pointer;
  transition: background 0.25s ease, box-shadow 0.25s ease, color 0.25s ease;
}

/* Gradient border glow on focus */
#actflSelect:focus-visible {
  outline: none;
  background: linear-gradient(
      180deg,
      rgba(58, 134, 255, 0.18),
      rgba(0, 224, 255, 0.08)
    ),
    var(--panel);
  box-shadow: 0 0 0 3px rgba(0, 224, 255, 0.25);
}

/* Dropdown arrow indicator (like voice select) */
#actflSelect::after {
  content: "▾";
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  font-size: 14px;
  color: var(--muted);
}

/* Wrapper for consistent spacing */
label[for="actflSelect"] {
  display: block;
  margin-top: 12px;
  font-size: 14px;
  font-weight: 600;
  color: var(--muted);
}

/* Dropdown option styling */
#actflSelect optgroup {
  font-style: normal;
  color: var(--muted-2);
  background-color: #0e1117;
}

#actflSelect option {
  background-color: #0e1117;
  color: var(--text);
  padding: 6px 8px;
}

#actflSelect option:hover,
#actflSelect option:focus {
  background: linear-gradient(90deg, var(--acc1) 0%, var(--acc2) 100%);
  color: #06111a;
}

/* Hover and glow */
#actflSelect:hover {
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.1),
    rgba(255, 255, 255, 0.04)
  );
  box-shadow: 0 0 10px rgba(58, 134, 255, 0.2);
}
.gate {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: radial-gradient(
    1000px 600px at 20% -10%,
    #0e1c2a 0%,
    #0b0c0e 40%,
    #07080a 100%
  );
  z-index: 9999;
}
.gate.hidden {
  display: none;
}
.gate-card {
  width: min(92vw, 440px);
  background: rgba(16, 18, 20, 0.9);
  border: 1px solid rgba(241, 230, 200, 0.12);
  border-radius: 16px;
  padding: 20px;
  color: #f5f3ef;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(8px);
}
.gate-card h2 {
  margin: 0 0 8px;
  font-weight: 700;
}
.hint {
  margin: 0 0 16px;
  color: #b8b1a8;
  font-size: 14px;
}
#gateForm {
  display: flex;
  gap: 8px;
}
#gateCode {
  flex: 1;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid #2a2d32;
  background: #101214;
  color: #f5f3ef;
  font-size: 16px;
  letter-spacing: 1px;
}
#gateCode::placeholder {
  color: #7f8896;
}
.gate-card button {
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid #b08d57;
  background: linear-gradient(180deg, #f1e6c8, #b08d57);
  color: #101214;
  font-weight: 700;
  cursor: pointer;
}
.gate-error {
  margin: 10px 0 0;
  min-height: 20px;
  color: #ff6b6b;
  font-size: 14px;
}
/* =======================
         MIC RECORDING INDICATOR
         ======================= */

/* The little "Listening…" pill */
.mic-indicator {
  display: none;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  line-height: 1;
  background: var(--mic-pill-bg);
  color: var(--text);
  border: 1px solid var(--mic-pill-border);
  backdrop-filter: blur(4px);
  user-select: none;
}
.mic-indicator.show {
  display: inline-flex;
}
.mic-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--mic-red);
  box-shadow: 0 0 0 0 rgba(255, 59, 48, 0.6);
  animation: micPing 1.2s infinite;
}
@keyframes micPing {
  0% {
    box-shadow: 0 0 0 0 rgba(255, 59, 48, 0.55);
    transform: scale(1);
  }
  70% {
    box-shadow: 0 0 0 8px rgba(255, 59, 48, 0);
    transform: scale(1.06);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(255, 59, 48, 0);
    transform: scale(1);
  }
}

/* Red pulse on the mic button when recording */
.mic-btn.recording {
  position: relative;
  outline: none;
  border-color: rgba(255, 59, 48, 0.35) !important;
  box-shadow: 0 0 0 3px rgba(255, 59, 48, 0.15),
    0 0 22px 0 rgba(255, 59, 48, 0.35);
  animation: micGlow 1.25s ease-in-out infinite;
}
@keyframes micGlow {
  0%,
  100% {
    box-shadow: 0 0 0 3px rgba(255, 59, 48, 0.12),
      0 0 14px 0 rgba(255, 59, 48, 0.28);
  }
  50% {
    box-shadow: 0 0 0 5px rgba(255, 59, 48, 0.2),
      0 0 28px 0 rgba(255, 59, 48, 0.5);
  }
}

/* Optional: nudge the controls row to make space for the pill nicely */
.controls {
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 8px;
  align-items: center;
}
.controls .mic-indicator {
  justify-self: start;
  grid-column: 1 / -1;
}
@media (min-width: 700px) {
  /* On wider screens, place the pill to the left of the mic button */
  .controls {
    grid-template-columns: 1fr auto auto auto;
  }
  .controls .mic-indicator {
    grid-column: auto;
    order: 0;
  }
}
/* Mic recording glow */
#speakBtn.recording,
.button.recording,
.mic-btn.recording {
  position: relative;
  box-shadow: 0 0 0 0 rgba(255, 60, 60, 0.55);
  animation: micPulse 1.2s ease-in-out infinite;
}
@keyframes micPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(255, 60, 60, 0.55);
  }
  70% {
    box-shadow: 0 0 0 12px rgba(255, 60, 60, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(255, 60, 60, 0);
  }
}

/* Optional baseline toast styles if you want via CSS (JS already inlined) */
.toast {
  font: 500 13px/1.4 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto,
    "Helvetica Neue";
}
.toast-success {
}
.toast-error {
}
.toast-warning {
}
.toast-info {
}
.toast-recording {
}
.card {
  position: relative;
  transition: transform 0.22s ease, box-shadow 0.22s ease, background 0.22s ease;
  overflow: clip; /* soften edges for spotlight */
}
.card::after {
  content: "";
  position: absolute;
  inset: -20%;
  background: radial-gradient(
    300px 200px at var(--mx, 50%) var(--my, 50%),
    rgba(255, 255, 255, 0.06),
    transparent 60%
  );
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease;
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.45);
}
.card:hover::after {
  opacity: 1;
}
button {
  position: relative;
  isolation: isolate;
  overflow: hidden;
}
button::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: linear-gradient(
    140deg,
    rgba(58, 134, 255, 0.35),
    rgba(0, 224, 255, 0.25)
  );
  filter: blur(14px);
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: -1;
}
button:hover::before {
  opacity: 1;
}

button::after {
  content: "";
  position: absolute;
  top: 0;
  left: -30%;
  width: 30%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.35),
    transparent
  );
  transform: skewX(-20deg);
  opacity: 0;
}
button:hover::after {
  animation: shimmer 0.9s linear;
  opacity: 1;
}
@keyframes shimmer {
  from {
    left: -30%;
  }
  to {
    left: 130%;
  }
}
nav {
  position: relative;
}
nav::after {
  content: "";
  position: absolute;
  bottom: 6px;
  height: 2px;
  width: var(--u-w, 0);
  left: var(--u-x, 0);
  background: var(--acc2);
  border-radius: 999px;
  transition: left 0.25s ease, width 0.25s ease;
}
.nav-btn {
  position: relative;
}
.nav-btn.active {
  --u-w: calc(100% - 20px); /* padding-aware */
  --u-x: calc(var(--btn-left, 0px) + 10px);
}
.nav-btn {
  --btn-left: 0px;
}
.nav-btn:nth-child(1) {
  --btn-left: 0px;
}
.nav-btn:nth-child(2) {
  --btn-left: 80px;
} /* adjust to your layout */
.nav-btn:nth-child(3) {
  --btn-left: 160px;
}
.controls:has(input:focus) {
  box-shadow: 0 0 0 3px rgba(58, 134, 255, 0.18), var(--shadow-sm);
  transform: translateY(-1px);
}
.msg.me .bubble {
  animation: pop 0.14s ease-out, sentRipple 0.6s ease-out;
}
@keyframes sentRipple {
  0% {
    box-shadow: 0 0 0 0 rgba(58, 134, 255, 0.35);
  }
  100% {
    box-shadow: 0 0 0 18px rgba(58, 134, 255, 0);
  }
}
.msg.ai .bubble {
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25),
    inset 0 0 0 1px rgba(255, 255, 255, 0.05);
  background-image: radial-gradient(
      220px 80px at 0% 0%,
      rgba(58, 134, 255, 0.05),
      transparent 60%
    ),
    linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.06),
      rgba(255, 255, 255, 0.02)
    );
}
.typing .dot {
  filter: drop-shadow(0 0 6px rgba(58, 134, 255, 0.5));
}
.skeleton {
  border-radius: 12px;
  overflow: hidden;
  position: relative;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.06) 25%,
    rgba(255, 255, 255, 0.12) 37%,
    rgba(255, 255, 255, 0.06) 63%
  );
  background-size: 400% 100%;
  animation: sk 1.1s ease-in-out infinite;
}
@keyframes sk {
  0% {
    background-position: 100% 0;
  }
  100% {
    background-position: -100% 0;
  }
}
.progress {
  --p: 0.72; /* 0..1 */
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: conic-gradient(
    var(--acc1) calc(var(--p) * 1turn),
    rgba(255, 255, 255, 0.08) 0
  );
  display: grid;
  place-items: center;
  font-weight: 800;
  font-size: 12px;
  color: var(--text);
  box-shadow: inset 0 0 0 6px rgba(0, 0, 0, 0.35), var(--shadow-sm);
}
.progress span {
  filter: drop-shadow(0 1px 0 rgba(0, 0, 0, 0.6));
}
.glass-soft {
  -webkit-mask-image: radial-gradient(
    120% 120% at 50% -10%,
    #000 60%,
    transparent 100%
  );
  mask-image: radial-gradient(
    120% 120% at 50% -10%,
    #000 60%,
    transparent 100%
  );
}
@media (prefers-contrast: more) {
  :root {
    --border: 1px solid rgba(255, 255, 255, 0.22);
    --divider: rgba(255, 255, 255, 0.25);
  }
  button {
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2), var(--shadow-sm);
  }
  .nav-btn.active {
    text-shadow: none;
  }
}
.chat-box::-webkit-scrollbar,
.feedback-scroll::-webkit-scrollbar {
  width: 8px;
}
.chat-box:hover::-webkit-scrollbar-thumb,
.feedback-scroll:hover::-webkit-scrollbar-thumb {
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.22),
    rgba(255, 255, 255, 0.12)
  );
}
details.feedback-details {
  border: var(--border);
  border-radius: 12px;
  overflow: hidden;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.05),
    rgba(255, 255, 255, 0.02)
  );
}
details.feedback-details > summary {
  cursor: pointer;
  list-style: none;
  padding: 10px 12px;
  font-weight: 700;
}
details.feedback-details[open] {
  box-shadow: var(--shadow-sm);
}
details.feedback-details > summary::-webkit-details-marker {
  display: none;
}
details.feedback-details > summary::after {
  content: "▾";
  float: right;
  transition: transform 0.2s ease;
  opacity: 0.7;
}
details.feedback-details[open] > summary::after {
  transform: rotate(180deg);
}
input.is-valid {
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--success) 30%, transparent);
}
input.is-invalid {
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--danger) 35%, transparent);
}
.toast {
  border-radius: 12px;
  padding: 10px 12px;
  background: rgba(16, 18, 24, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(8px);
  box-shadow: var(--shadow);
}
.toast-success {
  border-color: color-mix(in oklab, var(--success) 40%, white 10%);
}
.toast-error {
  border-color: color-mix(in oklab, var(--danger) 40%, white 10%);
}
.toast-warning {
  border-color: color-mix(in oklab, var(--warn) 40%, white 10%);
}
.toast-info {
  border-color: color-mix(in oklab, var(--acc1) 40%, white 10%);
}
:root.theme-warm {
  --acc1: #ff9a5a;
  --acc2: #ffd36e;
  --accent-grad: linear-gradient(140deg, #ff9a5a 0%, #ffd36e 100%);
}
button {
  transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
}
button:active {
  transform: translateY(1px) scale(0.995);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.28) inset;
  filter: contrast(1.02);
}
.gradient-text {
  background: linear-gradient(120deg, var(--acc1), var(--acc2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.chat-box {
  resize: vertical;
  min-height: 32dvh;
  max-height: 80dvh;
}
.feedback-scroll {
  resize: vertical;
  min-height: 28dvh;
  max-height: 80dvh;
}
.chat-box {
  scroll-snap-type: y proximity;
}
.msg {
  scroll-snap-align: start;
}
.badge.bump {
  animation: bump 0.36s cubic-bezier(0.2, 0.9, 0.3, 1.3);
}
@keyframes bump {
  0% {
    transform: scale(1);
  }
  40% {
    transform: scale(1.12);
  }
  100% {
    transform: scale(1);
  }
}
@media print {
  :root {
    color-scheme: light;
  }
  body {
    background: #fff !important;
    color: #111 !important;
  }
  header,
  nav,
  .controls,
  .gate,
  .mic-indicator {
    display: none !important;
  }
  .card,
  .feedback-item {
    box-shadow: none !important;
    border: 1px solid #ddd;
  }
  .badge {
    background: #222 !important;
    color: #fff !important;
  }
  a::after {
    content: " (" attr(href) ")";
    font-size: 12px;
    color: #666;
  }
}
@supports not (backdrop-filter: blur(8px)) {
  .card,
  .voice-preview,
  header,
  nav {
    background: rgba(30, 34, 42, 0.92);
  }
}
:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--acc1) 35%, transparent);
}
.chip.removable {
  padding-right: 28px;
  position: relative;
}
.chip.removable::after {
  content: "×";
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  opacity: 0.7;
}
.chip.removable:hover::after {
  opacity: 1;
}
.pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 12px;
  background: rgba(255, 255, 255, 0.06);
  border: var(--border);
}
.pill .dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--success);
  box-shadow: 0 0 0 0 rgba(40, 209, 124, 0.5);
  animation: ping 1.4s infinite;
}
@keyframes ping {
  0% {
    box-shadow: 0 0 0 0 rgba(40, 209, 124, 0.5);
  }
  70% {
    box-shadow: 0 0 0 8px rgba(40, 209, 124, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(40, 209, 124, 0);
  }
}
.icon-btn {
  display: inline-grid;
  place-items: center;
  width: 40px;
  height: 40px;
  border-radius: 10px;
}
.icon-btn:hover {
  transform: translateY(-1px);
  background: rgba(255, 255, 255, 0.06);
}
.section {
  position: relative;
  padding-top: 18px;
  margin-top: 10px;
}
.section::before {
  content: attr(data-label);
  position: absolute;
  top: -10px;
  left: 10px;
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--muted);
  background: var(--bg-alt);
  padding: 2px 8px;
  border-radius: 8px;
  border: var(--border);
}
.section hr {
  border: none;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--divider), transparent);
}
/* Re-usable utility */
.border-aurora {
  position: relative;
  isolation: isolate;
  overflow: hidden;
}
.border-aurora::before {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: conic-gradient(
    from 180deg,
    var(--acc1),
    var(--acc2),
    var(--acc1)
  );
  filter: blur(16px);
  opacity: 0;
  transition: opacity 0.25s ease;
  z-index: -1;
}
.border-aurora:hover::before {
  opacity: 0.35;
}

/* Apply to cards or buttons: <div class="card border-aurora">... */
button.border-aurora::before {
  filter: blur(10px);
}
.tilt {
  transform-style: preserve-3d;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  will-change: transform;
}
.tilt:hover {
  transform: perspective(800px) rotateX(2deg) rotateY(-2deg) translateY(-2px);
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.45);
}
.field {
  position: relative;
}
.field input[type="text"],
.field select,
.field textarea {
  padding: 18px 12px 10px 12px;
}
.field label {
  position: absolute;
  left: 12px;
  top: 10px;
  font-size: 13px;
  color: var(--muted);
  pointer-events: none;
  transition: transform 0.18s ease, color 0.18s ease, opacity 0.18s ease;
  background: transparent;
}
.field:has(input:focus),
.field:has(select:focus),
.field:has(textarea:focus) label {
  color: var(--acc2);
}
.field input:not(:placeholder-shown) + label,
.field select:valid + label,
.field textarea:not(:placeholder-shown) + label {
  transform: translateY(-12px) scale(0.92);
  opacity: 0.9;
  background: transparent;
}
.listy .item {
  padding: 10px 12px;
  border-radius: 12px;
  border: var(--border);
  background: rgba(255, 255, 255, 0.04);
  transition: transform 0.12s ease, background 0.12s ease, box-shadow 0.12s ease;
}
.listy .item + .item {
  margin-top: 6px;
}
.listy .item:hover {
  background: rgba(255, 255, 255, 0.07);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}
.listy .item:active {
  transform: translateY(0);
}
.code-chip {
  display: inline-block;
  padding: 2px 6px;
  border-radius: 8px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 12px;
  background: rgba(255, 255, 255, 0.06);
  border: var(--border);
}
.h-section {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 800;
  letter-spacing: 0.3px;
}
.h-section::before {
  content: "";
  width: 6px;
  height: 18px;
  border-radius: 999px;
  background: var(--accent-grad);
}
.ring {
  position: relative;
}
.ring::after {
  content: "";
  position: absolute;
  inset: -6px;
  border-radius: inherit;
  box-shadow: 0 0 0 0 rgba(0, 224, 255, 0.35);
  animation: pulseRing 1.4s ease-in-out infinite;
}
@keyframes pulseRing {
  0% {
    box-shadow: 0 0 0 0 rgba(0, 224, 255, 0.35);
  }
  70% {
    box-shadow: 0 0 0 12px rgba(0, 224, 255, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(0, 224, 255, 0);
  }
}
/* ============================
   GLASS LOCK — Chip & Curtain
   ============================ */

/* Tokens */
:root {
  --lock-iris: rgba(58, 134, 255, 0.35);
  --lock-iris-2: rgba(0, 224, 255, 0.28);
  --lock-text: var(--text);
  --lock-border: rgba(255, 255, 255, 0.14);
  --lock-sheen: rgba(255, 255, 255, 0.08);
}

/* Lock chip (button or span) */
.glass-lock {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  background: radial-gradient(
      140% 140% at 10% -20%,
      var(--lock-iris),
      transparent 60%
    ),
    radial-gradient(120% 120% at 110% 0%, var(--lock-iris-2), transparent 60%),
    linear-gradient(180deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.04));
  border: 1px solid var(--lock-border);
  color: var(--lock-text);
  backdrop-filter: blur(12px) saturate(1.1);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.28),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
  transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.24s ease;
  cursor: pointer;
  user-select: none;
}
.glass-lock:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35),
    inset 0 1px 0 rgba(255, 255, 255, 0.16);
  background: radial-gradient(
      140% 140% at 10% -20%,
      color-mix(in oklab, var(--acc1) 60%, transparent),
      transparent 60%
    ),
    radial-gradient(
      120% 120% at 110% 0%,
      color-mix(in oklab, var(--acc2) 50%, transparent),
      transparent 60%
    ),
    linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.12),
      rgba(255, 255, 255, 0.06)
    );
}
.glass-lock:active {
  transform: translateY(0);
}

/* If you use Font Awesome */
.glass-lock i {
  font-size: 14px;
  opacity: 0.95;
}

/* Pressed/locked visual */
.glass-lock[aria-pressed="true"],
.glass-lock.is-locked {
  background: linear-gradient(
      180deg,
      rgba(58, 134, 255, 0.16),
      rgba(0, 224, 255, 0.1)
    ),
    linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.08),
      rgba(255, 255, 255, 0.04)
    );
  box-shadow: 0 10px 28px rgba(0, 128, 255, 0.28),
    inset 0 0 0 1px rgba(255, 255, 255, 0.16);
}

/* Tiny sheen line for the chip */
.glass-lock::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(
    110deg,
    transparent 20%,
    var(--lock-sheen) 50%,
    transparent 80%
  );
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease;
}
.glass-lock:hover::after {
  opacity: 1;
}

/* ===== Curtain you can apply to any .card ===== */
.card.locked {
  position: relative;
  overflow: clip;
}
.card.locked::before {
  /* Frosted glass layer */
  content: "";
  position: absolute;
  inset: 0;
  backdrop-filter: blur(10px) brightness(0.85) saturate(1.05);
  background: radial-gradient(
      50% 60% at 50% 0%,
      rgba(255, 255, 255, 0.08),
      transparent 70%
    ),
    linear-gradient(180deg, rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.35));
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  pointer-events: auto;
  z-index: 2;
}
.card.locked::after {
  /* Center lock glyph */
  content: ""; /* Font Awesome: \f023 */
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  color: rgba(255, 255, 255, 0.85);
  text-shadow: 0 6px 24px rgba(0, 0, 0, 0.6);
  font-size: clamp(22px, 4vw, 34px);
  z-index: 3;
  filter: drop-shadow(0 0 12px rgba(58, 134, 255, 0.35));
}

/* Optional: dim content behind lock */
.card.locked > * {
  filter: saturate(0.85) contrast(0.95) opacity(0.65);
}

/* A subtle “unlock pulse” when toggled */
@keyframes unlockPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(0, 224, 255, 0.35);
  }
  80% {
    box-shadow: 0 0 0 16px rgba(0, 224, 255, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(0, 224, 255, 0);
  }
}
.card.unlocking {
  animation: unlockPulse 0.9s ease-out;
}
/* Aurora canvas sits behind everything */
.aurora {
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  filter: blur(40px) saturate(1.15) brightness(0.95);
  opacity: 0.55;
  mix-blend-mode: screen;
}
@media (prefers-reduced-motion: reduce) {
  .aurora {
    display: none;
  }
}
